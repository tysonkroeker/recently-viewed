jQuery.cookie=function(e,t,n){if(void 0===t){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),i=0;i<r.length;i++){var a=jQuery.trim(r[i]);if(a.substring(0,e.length+1)==e+"="){o=decodeURIComponent(a.substring(e.length+1));break}}return o}n=n||{},null===t&&(t="",n.expires=-1);var u="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date).setTime(c.getTime()+24*n.expires*60*60*1e3):c=n.expires,u="; expires="+c.toUTCString()}var p=n.path?"; path="+n.path:"",s=n.domain?"; domain="+n.domain:"",l=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),u,p,s,l].join("")},Shopify.Products=function(){var e={howManyToShow:3,howManyToStoreInMemory:10,wrapperId:"recently-viewed-products",templateId:"recently-viewed-product-template",onComplete:null},t=[],n=null,o=null,r=0,i={configuration:{expires:90,path:"/",domain:window.location.hostname},name:"shopify_recently_viewed",write:function(e){jQuery.cookie(this.name,e.join(" "),this.configuration)},read:function(){var e=[],t=jQuery.cookie(this.name);return null!==t&&(e=t.split(" ")),e},destroy:function(){jQuery.cookie(this.name,null,this.configuration)},remove:function(e){var t=this.read(),n=jQuery.inArray(e,t);-1!==n&&(t.splice(n,1),this.write(t))}},a=function(){if(t.length&&r<e.howManyToShow){var u="/products/"+t[0]+".js";"string"==typeof e.view&&(u="/products/"+t[0]+"?view="+e.view);var c;(c=new XMLHttpRequest).onreadystatechange=function(){if(4==c.readyState&&200==c.status)try{var e=c.responseText;"string"==typeof e&&(product=JSON.parse(e),o.tmpl(product).appendTo(n),t.shift(),r++,a())}catch(e){i.remove(t[0]),t.shift(),a()}},c.open("GET",u,!0),c.send()}else!function(){if(n.show(),e.onComplete)try{e.onComplete()}catch(e){}}()};return{resizeImage:function(e,t){if(null==t)return e;if("master"==t)return e.replace(/http(s)?:/,"");var n=e.match(/\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\?v=\d+)?/i);if(null!=n){var o=e.split(n[0]),r=n[0];return(o[0]+"_"+t+r).replace(/http(s)?:/,"")}return null},showRecentlyViewed:function(r){r=r||{};jQuery.extend(e,r),t=i.read(),o=jQuery("#"+e.templateId),n=jQuery("#"+e.wrapperId),e.howManyToShow=Math.min(t.length,e.howManyToShow),e.howManyToShow&&o.length&&n.length&&a()},getConfig:function(){return e},clearList:function(){i.destroy()},recordRecentlyViewed:function(t){t=t||{};jQuery.extend(e,t);var n=i.read();if(-1!==window.location.pathname.indexOf("/products/")){var o=window.location.pathname.match(/\/products\/([a-z0-9\-]+)/)[1],r=jQuery.inArray(o,n);-1===r?(n.unshift(o),n=n.splice(0,e.howManyToStoreInMemory)):(n.splice(r,1),n.unshift(o)),i.write(n)}}}}();